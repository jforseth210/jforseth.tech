<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>{{name}}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link
    href="https://fonts.googleapis.com/css?family=Baskervville|Calistoga|Gupter|Merriweather|Playfair+Display|Roboto+Condensed|Roboto+Mono|Roboto+Slab|Source+Sans+Pro&display=swap"
    rel="stylesheet">

  <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
  <script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.js"></script>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">
</head>

<body>
  <form id=form method="post">
    <textarea id="summernote" name="editordata"></textarea></form>
  <script>
    $(document).ready(function () {
      $('#summernote').summernote({
        fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New', 'Baskerville', 'Gupter', 'Roboto Mono', 'Roboto Condensed', 'Source Sans Pro', 'Merriweather', 'Roboto Slab', 'Calistoga', 'Playfair Display'],
        fontNamesIgnoreCheck: ['Baskerville', 'Gupter', 'Roboto Mono', 'Roboto Condensed', 'Source Sans Pro', 'Merriweather', 'Roboto Slab', 'Calistoga', 'Playfair Display'],
    });
    $('#summernote').summernote('fullscreen.toggle');
    $.ajax({
      url: '/writer/document/{{name}}',
      type: 'GET',
      success: function (res) {
        $('#summernote').summernote('code', res);
      }

    })
    });
    $('#summernote').on('summernote.change', function (we, contents, $editable) {
      console.log('onChange:', contents, $editable);
      we.preventDefault();
      var id_value = contents;
      // Do an AJAX post
      $.ajax({
        type: "POST",
        url: "/writer/save/{{name}}",
        data: {
          text: id_value // various ways to store the ID, you can choose
        },
        success: function (data) {
          // POST was successful - do something with the response

        },
        error: function (data) {
          // Server error, e.g. 404, 500, error
        }
      });
    });
  </script>
</body>

</html>